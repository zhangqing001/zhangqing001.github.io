
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Put PowerDNS to Practice | sunny&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="qing.zhang">
    

    
    <meta name="description" content="Put PowerDNS to Practice

PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the">
<meta property="og:type" content="article">
<meta property="og:title" content="Put PowerDNS to Practice">
<meta property="og:url" content="http://yoursite.com/2015/03/30/Put-PowerDNS-to-use/">
<meta property="og:site_name" content="sunny's Blog">
<meta property="og:description" content="Put PowerDNS to Practice

PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Put PowerDNS to Practice">
<meta name="twitter:description" content="Put PowerDNS to Practice

PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the">
<meta name="twitter:creator" content="@ruiaylin">


    
    <link rel="alternative" href="/atom.xml" title="sunny&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="sunny&#39;s Blog" title="sunny&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="sunny&#39;s Blog">sunny&#39;s Blog</a></h1>
				<h2 class="blog-motto">蹈之而弗悔 ,  慎思而笃行  ...</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/30/Put-PowerDNS-to-use/" title="Put PowerDNS to Practice" itemprop="url">Put PowerDNS to Practice</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="qing.zhang" target="_blank" itemprop="author">qing.zhang</a>
		
  <p class="article-time">
    <time datetime="2015-03-30T05:50:53.000Z" itemprop="datePublished"> 发表于 3月 30 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Put_PowerDNS_to_Practice"><span class="toc-number">1.</span> <span class="toc-text">Put PowerDNS to Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Good_things_:"><span class="toc-number">1.1.</span> <span class="toc-text">Good things :</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Key_components_of_PowerDNS"><span class="toc-number">2.</span> <span class="toc-text">Key components of PowerDNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The_Authoritative_Server"><span class="toc-number">2.1.</span> <span class="toc-text">The Authoritative Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-_Primary_server"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. Primary server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-_The_secondary_name_server"><span class="toc-number">2.1.2.</span> <span class="toc-text">2. The secondary name server</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The_PowerDNS_recursor"><span class="toc-number">2.2.</span> <span class="toc-text">The PowerDNS recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The_PowerDNS_recursor_supports:"><span class="toc-number">2.2.1.</span> <span class="toc-text">The PowerDNS recursor supports:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing_the_PowerDNS"><span class="toc-number">3.</span> <span class="toc-text">Installing the PowerDNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#install"><span class="toc-number">3.1.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure"><span class="toc-number">3.2.</span> <span class="toc-text">configure</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing_the_PowerDNS_Recursor"><span class="toc-number">4.</span> <span class="toc-text">Installing the PowerDNS Recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS_安装_recursor_:"><span class="toc-number">4.1.</span> <span class="toc-text">CentOS 安装 recursor :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure_:"><span class="toc-number">4.2.</span> <span class="toc-text">configure :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manage_recursor_service_：_"><span class="toc-number">4.3.</span> <span class="toc-text">manage recursor service ：　</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance_and_Tuning"><span class="toc-number">5.</span> <span class="toc-text">Performance and Tuning</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">6.</span> <span class="toc-text">Summary</span></a></li></ol>
		
		</div>
		
		<h2 id="Put_PowerDNS_to_Practice">Put PowerDNS to Practice</h2>
<blockquote>
<p>PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the largest ISPs and websites in the world, such as AOL, Shaw Cable, and even Wikipedia. Its compact codebase and focus on security, scalability, and reliability make it a great name server choice. PowerDNS is jam packed with features that would impress any network or system admin. </p>
</blockquote>
<h3 id="Good_things_:">Good things :</h3>
<pre><code>    Authoritative DNS <span class="built_in">server</span> (hosting)
    Resolving DNS <span class="built_in">server</span> (caching)
    API <span class="keyword">to</span> provision zones <span class="keyword">and</span> records
    DNSSEC support (as of <span class="number">3.</span>x)
    Web-based management options
    DNS data stored <span class="keyword">in</span> plaintext (BIND compatible)
    IPv4 <span class="keyword">and</span> IPv6, UDP/TCP, <span class="number">100</span>% compliant
    MySQL, PostgreSQL, Microsoft SQL <span class="built_in">Server</span>, Oracle, Sybase database back ends
    Load balancing/failover algorithms
    SNMP support
    Remotely pollable statistics <span class="keyword">for</span> real-<span class="built_in">time</span> graphing
    Optional built-<span class="keyword">in</span> web <span class="built_in">server</span>
    Debugging tools
    Support <span class="keyword">for</span> Linux, BSD, Unix
</code></pre><h2 id="Key_components_of_PowerDNS">Key components of PowerDNS</h2>
<h3 id="The_Authoritative_Server">The Authoritative Server</h3>
<p>角色 : </p>
<h4 id="1-_Primary_server">1. Primary server</h4>
<pre><code>Sometimes called <span class="keyword">a</span> master server, which <span class="keyword">is</span> the original <span class="built_in">and</span> definitive 
<span class="keyword">source</span> <span class="keyword">for</span> <span class="keyword">all</span> zone records <span class="keyword">for</span> <span class="keyword">a</span> domain.
</code></pre><h4 id="2-_The_secondary_name_server">2. The secondary name server</h4>
<pre><code>Often called <span class="operator">a</span> slave server, is <span class="operator">an</span> identical replica used <span class="built_in">to</span> provide redundancy <span class="operator">and</span> high availability.
Like <span class="keyword">any</span> service <span class="keyword">as</span> vital <span class="keyword">as</span> DNS, you should build redundancy <span class="keyword">into</span> your infrastructure. That means <span class="keyword">at</span> 
least <span class="constant">two</span> <span class="operator">or</span> more <span class="operator">of</span> everything, <span class="operator">or</span> you will need much more than <span class="constant">two</span> aspirins <span class="built_in">to</span> deal <span class="operator">with</span> <span class="operator">the</span> 
headaches caused <span class="keyword">by</span> downtime.
</code></pre><h3 id="The_PowerDNS_recursor">The PowerDNS recursor</h3>
<pre><code>Simply provides caching <span class="operator">or</span> <span class="operator">a</span> standalone recursive resolver <span class="keyword">for</span> clients accessing your network <span class="operator">or</span> <span class="operator">the</span> 
greater Internet (i.e., <span class="keyword">it</span> is your <span class="keyword">first</span> <span class="built_in">line</span> <span class="operator">of</span> DNS <span class="keyword">for</span> client machines). Recall that <span class="keyword">it</span> isn’t 
authoritative but simply provides query resolution <span class="built_in">to</span> <span class="operator">the</span> network client resolver (<span class="operator">the</span> client-side
portion used <span class="built_in">to</span> perform DNS queries) <span class="command"><span class="keyword">on</span> <span class="title">your</span> <span class="title">local</span> <span class="title">machine</span>.</span>
</code></pre><h4 id="The_PowerDNS_recursor_supports:">The PowerDNS recursor supports:</h4>
<pre><code>All relevant standards
Advanced anti-spoofing measures
Reconfiguration <span class="keyword">without</span> downtime
Plain BIND zone <span class="built_in">files</span> <span class="keyword">for</span> “resolved hosting”
Question interception, answer reconditioning, NXDOMAIN redirection
-(including “block lists” <span class="operator">and</span> security measures)
The rec_control utility, <span class="operator">an</span> API <span class="keyword">for</span> direct control <span class="operator">of</span> <span class="operator">the</span> PowerDNS recursor <span class="operator">and</span> <span class="built_in">to</span> output data 
-<span class="built_in">to</span> MRTG <span class="operator">and</span> RDD <span class="keyword">for</span> pretty network graphs
Local <span class="operator">and</span> remote access
DNS64
</code></pre><h2 id="Installing_the_PowerDNS">Installing the PowerDNS</h2>
<h3 id="install">install</h3>
<pre><code>yum <span class="operator"><span class="keyword">install</span> wget
wget http://soft.laozuo.org/powerdns/epel-<span class="keyword">release</span>-<span class="number">6</span>-<span class="number">8.</span>noarch.rpm
rpm -Uvh ./epel-<span class="keyword">release</span>-<span class="number">6</span>-<span class="number">8.</span>noarch.rpm
yum <span class="keyword">install</span> pdns pdns-backend-mysql</span>
</code></pre><h3 id="configure">configure</h3>
<p>BackEnd: MySQL </p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">database</span> powerdnsdb;</span> 
<span class="operator"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> powerdns.* <span class="keyword">TO</span> <span class="string">'pownerdns'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'pownerdns'</span>;</span>
<span class="operator"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</span>
</code></pre><p>SQL : </p>
<pre><code><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> domains (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  name                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  <span class="keyword">master</span>                <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  last_check            <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  type                  <span class="built_in">VARCHAR</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  notified_serial       <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  account               <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> name_index <span class="keyword">ON</span> domains(name);</span>    

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> records (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  domain_id             <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  name                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  type                  <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  content               <span class="built_in">VARCHAR</span>(<span class="number">64000</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  ttl                   <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  prio                  <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  change_date           <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  disabled              TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>,
  ordername             <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="built_in">BINARY</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
  auth                  TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="number">1</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> nametype_index <span class="keyword">ON</span> records(name,type);</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> domain_id <span class="keyword">ON</span> records(domain_id);</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> recordorder <span class="keyword">ON</span> records (domain_id, ordername);</span> 

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> supermasters (
  ip                    <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  nameserver            <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  account               <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (ip, nameserver)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> comments (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  domain_id             <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  name                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  type                  <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  modified_at           <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  account               <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  comment               <span class="built_in">VARCHAR</span>(<span class="number">64000</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> comments_domain_id_idx <span class="keyword">ON</span> comments (domain_id);</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> comments_name_type_idx <span class="keyword">ON</span> comments (name, type);</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> comments_order_idx <span class="keyword">ON</span> comments (domain_id, modified_at);</span>   

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> domainmetadata (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  domain_id             <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  kind                  <span class="built_in">VARCHAR</span>(<span class="number">32</span>),
  content               <span class="built_in">TEXT</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> domainmetadata_idx <span class="keyword">ON</span> domainmetadata (domain_id, kind);</span>    

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cryptokeys (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  domain_id             <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  flags                 <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,
  active                BOOL,
  content               <span class="built_in">TEXT</span>,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> domainidindex <span class="keyword">ON</span> cryptokeys(domain_id);</span>    

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tsigkeys (
  id                    <span class="built_in">INT</span> AUTO_INCREMENT,
  name                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>),
  algorithm             <span class="built_in">VARCHAR</span>(<span class="number">50</span>),
  secret                <span class="built_in">VARCHAR</span>(<span class="number">255</span>),
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id)
) <span class="keyword">Engine</span>=<span class="keyword">InnoDB</span>;</span>    
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> namealgoindex <span class="keyword">ON</span> tsigkeys(name, algorithm);</span>
</code></pre><p>RECORD :  </p>
<pre><code><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 258. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>
       id: 649
domain_id: 1
     name: ruiaylin2.sjz.autohome.com.cn
     type: A
  content: 192.168.xx.xxx
      ttl: 86400
     prio: 0
change_date: 1425371097
 disabled: 0
ordername: NULL
     auth: 1 
</code></pre><p>ADD DNS :</p>
<pre><code><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> records(
domain_id, name, type, content, ttl, prio,change_date, disabled,  ordername, auth
) <span class="keyword">values</span> (
<span class="number">1</span>, <span class="string">'ruiaylin3.sjz.autohome.com.cn'</span> , <span class="string">'A'</span> , <span class="string">'192.168.xx.xx'</span> , <span class="number">86400</span>, <span class="number">0</span> , <span class="number">1425371097</span> ,<span class="number">0</span>,<span class="string">''</span>,<span class="number">1</span>
) ;</span>
</code></pre><p>core variables : </p>
<pre><code>forward-zones=autohome.com.cn=192.168.xxx.xxxx;192.168.xxx.xxx
local-address=0.0.0.0
max-<span class="operator"><span class="keyword">cache</span>-ttl=<span class="number">120</span>  // dns <span class="keyword">cache</span> invalid <span class="keyword">time</span> 
// other <span class="keyword">variables</span> <span class="keyword">use</span> the <span class="keyword">default</span> <span class="keyword">value</span> </span>
</code></pre><h2 id="Installing_the_PowerDNS_Recursor">Installing the PowerDNS Recursor</h2>
<h3 id="CentOS_安装_recursor_:">CentOS 安装 recursor :</h3>
<pre><code>yum -y <span class="operator"><span class="keyword">install</span> pdns pdns-backend-mysql pdns-recursor</span>
</code></pre><h3 id="configure_:">configure :</h3>
<pre><code>launch=gmysql
gmysql-host=192.168.xxx.xxx
gmysql-user=xxx
gmysql-password=xxx
gmysql-dbname=powerdnsdb 
max-<span class="operator"><span class="keyword">cache</span>-ttl=<span class="number">120</span>  // dns <span class="keyword">cache</span> invalid <span class="keyword">time</span> 
// other <span class="keyword">variables</span> <span class="keyword">use</span> the <span class="keyword">default</span> <span class="keyword">value</span> </span>
</code></pre><h3 id="manage_recursor_service_：_">manage recursor service ：　</h3>
<pre><code> service pdns-recursor <span class="operator"><span class="keyword">start</span> / <span class="keyword">stop</span> </span>
</code></pre><h2 id="Performance_and_Tuning">Performance and Tuning</h2>
<p>We can reference the docs : <a href="https://doc.powerdns.com/md/authoritative/performance/#performance-and-tuning" target="_blank" rel="external">https://doc.powerdns.com/md/authoritative/performance/#performance-and-tuning</a></p>
<h2 id="Summary">Summary</h2>
<pre><code>powerDNS is <span class="operator">a</span> alternative DNS <span class="keyword">for</span> OPS basic service . Happy <span class="built_in">to</span> use <span class="keyword">it</span> ! 
</code></pre>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PowerDNS/">PowerDNS</a><a href="/tags/DNS/">DNS</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2015/03/30/Put-PowerDNS-to-use/" data-title="Put PowerDNS to Practice | sunny&#39;s Blog" data-tsina="undefined" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/05/04/install docker on centos 6.x/" title="Install docker on CentOs">
  <strong>上一篇：</strong><br/>
  <span>
  Install docker on CentOs</span>
</a>
</div>


<div class="next">
<a href="/2015/03/05/mha-manager/"  title="Master HA Management&amp;Maintain">
 <strong>下一篇：</strong><br/> 
 <span>Master HA Management&amp;Maintain
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Put_PowerDNS_to_Practice"><span class="toc-number">1.</span> <span class="toc-text">Put PowerDNS to Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Good_things_:"><span class="toc-number">1.1.</span> <span class="toc-text">Good things :</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Key_components_of_PowerDNS"><span class="toc-number">2.</span> <span class="toc-text">Key components of PowerDNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The_Authoritative_Server"><span class="toc-number">2.1.</span> <span class="toc-text">The Authoritative Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-_Primary_server"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. Primary server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-_The_secondary_name_server"><span class="toc-number">2.1.2.</span> <span class="toc-text">2. The secondary name server</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The_PowerDNS_recursor"><span class="toc-number">2.2.</span> <span class="toc-text">The PowerDNS recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The_PowerDNS_recursor_supports:"><span class="toc-number">2.2.1.</span> <span class="toc-text">The PowerDNS recursor supports:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing_the_PowerDNS"><span class="toc-number">3.</span> <span class="toc-text">Installing the PowerDNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#install"><span class="toc-number">3.1.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure"><span class="toc-number">3.2.</span> <span class="toc-text">configure</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing_the_PowerDNS_Recursor"><span class="toc-number">4.</span> <span class="toc-text">Installing the PowerDNS Recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS_安装_recursor_:"><span class="toc-number">4.1.</span> <span class="toc-text">CentOS 安装 recursor :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure_:"><span class="toc-number">4.2.</span> <span class="toc-text">configure :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manage_recursor_service_：_"><span class="toc-number">4.3.</span> <span class="toc-text">manage recursor service ：　</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance_and_Tuning"><span class="toc-number">5.</span> <span class="toc-text">Performance and Tuning</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">6.</span> <span class="toc-text">Summary</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="ruiaylin" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/MySQL/" title="MySQL">MySQL<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux/" title="linux">linux<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/oracle/" title="oracle">oracle<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>7</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/fabric/" title="fabric">fabric<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ops/" title="ops">ops<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/mha/" title="mha">mha<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/xtrabackup/" title="xtrabackup">xtrabackup<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/sharding/" title="sharding">sharding<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/DNS/" title="DNS">DNS<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/code/" title="code">code<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/源码/" title="源码">源码<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/多实例/" title="多实例">多实例<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/autofailover/" title="autofailover">autofailover<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/shell/" title="shell">shell<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/DLZ/" title="DLZ">DLZ<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/BIND/" title="BIND">BIND<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/load-data/" title="load-data">load-data<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/tools/" title="tools">tools<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/optimization/" title="optimization">optimization<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/pssh/" title="pssh">pssh<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://flask.pocoo.org/" target="_blank" title="Flask Documentation">Flask Docs</a>
            
          </li>
        
          <li>
            
            	<a href="http://tympanus.net/codrops/ " target="_blank" title=" front end development">Codrops</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> I&#39;m ruiayLin , work at AUTOHOME.COM.CN   <br/>
			Previous : work at Alipay.com as a database engineer for three years </p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/ruiaylin" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/ruiaylin" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/ruiayLin" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/ruichao-lin-5713624a" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		
		
		<a href="mailto:ruiaylin@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="qing.zhang">qing.zhang</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
